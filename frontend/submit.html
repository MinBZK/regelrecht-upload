<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nieuwe Inzending - RegelRecht Upload Portal</title>
  <link rel="stylesheet" href="/fonts/fonts.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="header">
    <div class="header-content">
      <a href="/" class="logo">
        <span class="logo-text">RegelRecht</span>
        <span class="logo-subtitle">Upload Portal</span>
      </a>
    </div>
  </header>

  <main class="main">
    <div id="status-message" class="status-message" style="display: none;"></div>

    <!-- Progress Bar -->
    <rr-progress-bar id="progress-bar" current="1"></rr-progress-bar>

    <!-- Step 1: Privacy Consent (CRITICAL - Must be first per legal requirements) -->
    <div id="step-1" class="card step-panel">
      <h2 class="card-title">Privacyverklaring</h2>

      <div class="privacy-content">
        <p>Voordat u uw documenten kunt indienen, vragen wij u kennis te nemen van hoe wij met uw gegevens omgaan.</p>

        <div class="info-block">
          <h3>Wat doen wij met uw gegevens?</h3>
          <ul>
            <li>Uw contactgegevens worden uitsluitend gebruikt om contact met u op te nemen over uw inzending</li>
            <li>De ingediende documenten worden geanalyseerd voor het RegelRecht onderzoeksproject</li>
            <li>Uw gegevens worden bewaard zolang nodig voor de Proof of Concept fase</li>
            <li>Wij delen uw gegevens niet met derden zonder uw toestemming</li>
          </ul>
          <p style="margin-top: 12px;">
            <a href="/privacy.html" target="_blank">Lees de volledige privacyverklaring →</a>
          </p>
        </div>

        <div class="consent-section">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="consent_privacy" required>
              <span>Ik heb de privacyverklaring gelezen en ga akkoord met de verwerking van mijn gegevens</span>
            </label>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="consent_documents" required>
              <span>Ik geef toestemming voor het gebruik van de door mij geüploade documenten voor het RegelRecht onderzoeksproject</span>
            </label>
          </div>
        </div>
      </div>

      <div class="button-group">
        <rr-button variant="primary" id="btn-next-1">Verder naar documenten</rr-button>
      </div>
    </div>

    <!-- Step 2: Documents -->
    <div id="step-2" class="card step-panel" style="display: none;">
      <a href="#" class="back-link" id="btn-back-2">← Terug naar privacy</a>

      <h2 class="card-title">Documenten toevoegen</h2>
      <p class="step-intro">Voeg de documenten toe die u wilt indienen. De bestanden worden pas geüpload bij de definitieve inzending.</p>

      <!-- Staged documents list (altijd zichtbaar) -->
      <div id="document-list" class="document-list">
        <p class="empty-state">Nog geen documenten toegevoegd</p>
      </div>

      <div class="inner-card">
        <!-- Toggle: Link of Document -->
        <rr-toggle-group
          id="upload_mode"
          name="upload_mode"
          value="document"
          options='[{"value": "document", "label": "Document uploaden"}, {"value": "link", "label": "Link toevoegen"}]'
        ></rr-toggle-group>

        <!-- Link toevoegen -->
        <div id="mode-link" style="display: none; margin-top: var(--spacing-4);">
          <p class="field-hint">Verwijs naar wetgeving of regelgeving, bijv. via <a href="https://wetten.overheid.nl" target="_blank">wetten.overheid.nl</a> of <a href="https://lokaleregelgeving.overheid.nl/zoeken" target="_blank">lokaleregelgeving.overheid.nl</a></p>

          <div class="form-group">
            <label class="form-label" for="link_url">Link naar wet of regelgeving</label>
            <rr-text-field id="link_url" name="link_url" value="https://"></rr-text-field>
          </div>

          <div class="form-group">
            <label class="form-label" for="link_title">Titel (optioneel)</label>
            <rr-text-field id="link_title" name="link_title"></rr-text-field>
          </div>

          <rr-button variant="secondary" id="btn-add-link">Voeg link toe</rr-button>
        </div>

        <!-- Document uploaden -->
        <div id="mode-document" style="margin-top: var(--spacing-4);">
          <p class="field-hint">Accepteert PDF, Word, Excel, PowerPoint, en tekstbestanden (max. 50MB)</p>

          <div class="form-group">
            <label class="form-label">Classificatie</label>
            <rr-toggle-group
              id="doc_classification"
              name="classification"
              options='[{"value": "public", "label": "Openbaar"}, {"value": "claude_allowed", "label": "AI-verwerking toegestaan"}, {"value": "restricted", "label": "Beperkt", "variant": "danger"}]'
              required
            ></rr-toggle-group>
          </div>

          <div id="classification-warning" class="warning-box" style="display: none;">
            <strong>Let op:</strong> Documenten met classificatie "Beperkt" kunnen niet worden geüpload naar dit portaal.
            Deze documenten mogen niet worden gebruikt met AI-tools.
          </div>

          <div id="upload-area" class="form-group">
            <label class="form-label">Bestand selecteren</label>
            <rr-file-upload id="doc_file" multiple></rr-file-upload>
          </div>

        </div>
      </div>

      <div class="button-group">
        <rr-button variant="primary" id="btn-next-2">Verder naar planning</rr-button>
      </div>
    </div>

    <!-- Step 3: Schedule meeting -->
    <div id="step-3" class="card step-panel" style="display: none;">
      <a href="#" class="back-link" id="btn-back-3">← Terug naar documenten</a>

      <h2 class="card-title">Gesprek inplannen</h2>
      <p class="step-intro">Plan optioneel een gesprek in om de resultaten van de verkenning te bespreken. Het is nuttig als inhoudelijk juridische experts aanschuiven.</p>

      <rr-toggle-group
        id="planning_choice"
        name="planning_choice"
        value="no_appointment"
        options='[{"value": "no_appointment", "label": "Geen afspraak"}, {"value": "pick_slot", "label": "Tijdslot kiezen"}]'
      ></rr-toggle-group>

      <div id="no-appointment-info" class="info-box" style="margin-top: var(--spacing-4);">
        Geen probleem. Ons team neemt na de verkenning contact met u op om een afspraak in te plannen.
      </div>

      <div id="available-slots" class="slots-container" style="display: none; margin-top: var(--spacing-4);">
        <p class="loading-state">Beschikbare tijdsloten worden geladen...</p>
      </div>

      <div class="button-group">
        <rr-button variant="primary" id="btn-next-3">Verder naar gegevens</rr-button>
      </div>
    </div>

    <!-- Step 4: Contact Information -->
    <div id="step-4" class="card step-panel" style="display: none;">
      <a href="#" class="back-link" id="btn-back-4">← Terug naar planning</a>

      <h2 class="card-title">Uw contactgegevens</h2>
      <p class="step-intro">Vul uw gegevens in zodat wij contact met u kunnen opnemen over uw inzending.</p>

      <div class="form-row">
        <div class="form-group form-group-grow">
          <label class="form-label" for="submitter_name">Naam</label>
          <rr-text-field id="submitter_name" name="submitter_name" required></rr-text-field>
        </div>
        <div class="form-group form-group-grow">
          <label class="form-label" for="submitter_email">E-mailadres</label>
          <rr-text-field id="submitter_email" name="submitter_email" type="email" required></rr-text-field>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group form-group-grow">
          <label class="form-label" for="organization">Organisatie</label>
          <rr-text-field id="organization" name="organization" required></rr-text-field>
        </div>
        <div class="form-group form-group-grow">
          <label class="form-label" for="organization_department">Afdeling (optioneel)</label>
          <rr-text-field id="organization_department" name="organization_department"></rr-text-field>
        </div>
      </div>

      <div class="button-group">
        <rr-button variant="primary" id="btn-next-4">Verder naar bevestiging</rr-button>
      </div>
    </div>

    <!-- Step 5: Summary / Confirmation -->
    <div id="step-5" class="card step-panel" style="display: none;">
      <a href="#" class="back-link" id="btn-back-5">← Terug naar gegevens</a>

      <h2 class="card-title">Controleer uw inzending</h2>
      <p class="step-intro">Controleer onderstaande gegevens en rond uw inzending af. Na bevestiging worden alle documenten geüpload.</p>

      <!-- Documents Summary -->
      <div class="summary-card">
        <div class="summary-header">
          <h3 class="summary-title">Documenten</h3>
          <button type="button" class="edit-link" id="edit-documents">Wijzig</button>
        </div>
        <div id="summary-documents" class="summary-content">
          <p class="empty-state">Geen documenten toegevoegd</p>
        </div>
      </div>

      <!-- Planning Summary -->
      <div class="summary-card">
        <div class="summary-header">
          <h3 class="summary-title">Geplande afspraak</h3>
          <button type="button" class="edit-link" id="edit-planning">Wijzig</button>
        </div>
        <div id="summary-planning" class="summary-content">
          <p class="empty-state">Geen tijdslot geselecteerd</p>
        </div>
      </div>

      <!-- Contact Summary -->
      <div class="summary-card">
        <div class="summary-header">
          <h3 class="summary-title">Contactgegevens</h3>
          <button type="button" class="edit-link" id="edit-contact">Wijzig</button>
        </div>
        <div id="summary-contact" class="summary-content">
          <p class="empty-state">Geen gegevens ingevuld</p>
        </div>
      </div>

      <div class="button-group button-group-center">
        <rr-button variant="primary" id="btn-submit">Rond inzending af</rr-button>
      </div>
    </div>

    <!-- Success message -->
    <div id="step-success" class="card step-panel" style="display: none; text-align: center;">
      <div class="success-icon">&#10003;</div>
      <h2 class="card-title">Inzending succesvol!</h2>
      <p>Uw inzending is ontvangen. U kunt de status volgen met onderstaande referentie:</p>
      <div class="reference-code" id="submission-slug"></div>
      <p class="hint-text">Bewaar deze referentie om uw inzending later op te kunnen vragen.</p>
      <div class="button-group button-group-center">
        <a href="/" id="link-home"><rr-button variant="secondary">Terug naar home</rr-button></a>
        <a href="/status.html" id="link-status"><rr-button variant="primary">Bekijk status</rr-button></a>
      </div>
    </div>
  </main>

  <footer class="footer footer-legal">
    <div class="footer-content">
      <span>&copy; 2026 Ministerie van Binnenlandse Zaken en Koninkrijksrelaties</span>
      <nav class="footer-links">
        <a href="/privacy.html">Privacyverklaring</a>
        <a href="/faq.html">Help</a>
      </nav>
    </div>
  </footer>

  <script type="module" src="/webcomponents/index.js"></script>
  <script type="module" src="/js/submit.js"></script>
</body>
</html>
